


<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">

<html lang="en">
<head>
    <title>
        Allen High School / Calendar</title>
    <!--
    <PageMap>
    <DataObject type="document">
    <Attribute name="siteid">1654</Attribute>
    </DataObject>
    </PageMap>
    -->

    
    
    <!-- Begin swuc.GlobalJS -->
<script type="text/javascript">
 staticURL = "https://www.allenisd.org/Static/V2_19_07/";
 SessionTimeout = "0";
</script>
<!-- End swuc.GlobalJS -->


    <!-- Stylesheets -->

    <link rel="Stylesheet" type="text/css" href="https://www.allenisd.org/Static/V2_19_07/GlobalAssets/webfonts/OpenSans-Light.css" />
    <link rel="Stylesheet" type="text/css" href="https://www.allenisd.org/Static/V2_19_07/GlobalAssets/webfonts/OpenSans-Italic.css" />
    <link rel="Stylesheet" type="text/css" href="https://www.allenisd.org/Static/V2_19_07/GlobalAssets/webfonts/OpenSans-Regular.css" />
    <link rel="Stylesheet" type="text/css" href="https://www.allenisd.org/Static/V2_19_07/GlobalAssets/webfonts/OpenSans-SemiBold.css" />
    <link rel="Stylesheet" type="text/css" href="/Content/shepherd/shepherd-theme-default.css" />
    <link rel="Stylesheet" type="text/css" href="https://www.allenisd.org/Static/V2_19_07/App_Themes/SW/jquery.jgrowl.css" />
    <link rel="Stylesheet" type="text/css" href="https://www.allenisd.org/Static/V2_19_07//site/assets/styles/system.css" />
    <link rel="Stylesheet" type="text/css" href="https://www.allenisd.org/Static/V2_19_07//site/assets/styles/apps.css" />
    <link rel="Stylesheet" type="text/css" href="https://www.allenisd.org/Static/V2_19_07/App_Themes/SW/jQueryUI.css" />
    <link rel="Stylesheet" type="text/css" href="https://www.allenisd.org/Static/V2_19_07/GlobalAssets/webfonts/SchoolwiresMobile.css" />
    <link rel="Stylesheet" type="text/css" href="https://www.allenisd.org/Static/V2_19_07//site/assets/styles/dashboard.css" />
    <link rel="Stylesheet" type="text/css" href="https://www.allenisd.org/Static/V2_19_07/GlobalAssets/Styles/Grid.css" />

    <!-- Scripts -->
    

    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js' type='text/javascript'></script>
    <script src='https://www.allenisd.org/Static/V2_19_07/GlobalAssets/Scripts/min/jquery-migrate-1.2.1.js' type='text/javascript'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js' type='text/javascript'></script>
    <script src='/Scripts/tether.min.js' type='text/javascript'></script>
    <script src='/Scripts/shepherd/shepherd.min.js' type='text/javascript'></script>


<script type="text/javascript">
    $(document).ready(function() {
        channelHoverIE();
        channelTouch();
        closeMenuByPressingKey();
    });

    function channelTouch() {
        // this will change the dropdown behavior when it is touched vs clicked.
        // channels will be clickable on second click. first click simply opens the menu.
        $('#channel-navigation > .sw-channel-item > a').on({
            'touchstart': function (e) {
                
                // see if has menu
                if ($(this).siblings('ul.sw-channel-dropdown li').length > 0) {
                    var button = $(this);

                    // add href as property if not already set
                    // then remove href attribute
                    if (!button.prop('linkHref')) {
                        button.prop('linkHref', button.attr('href'));
                        button.removeAttr('href');
                    }

                    // check to see if menu is already open
                    if ($(this).siblings('ul.sw-channel-dropdown').is(':visible')) {
                        // if open go to link
                        window.location.href = button.prop('linkHref');
                    } 

                } 
            }
        });
    }


    
    function channelHoverIE(){
		// set z-index for IE7
		var parentZindex = $('#channel-navigation').parents('div:first').css('z-index');
		var zindex = (parentZindex > 0 ? parentZindex : 8000);
		$(".sw-channel-item").each(function(ind) {
			$(this).css('z-index', zindex - ind);
			zindex --;
		});
	    $(".sw-channel-item").hover(function(){
	        var subList = $(this).children('ul');
	        if ($.trim(subList.html()) !== "") {
	            subList.show();
	            subList.attr("aria-hidden", "false");
		    }
		    $(this).addClass("hover");
	    }, function() {
	        $(".sw-channel-dropdown").hide();
	        $(this).removeClass("hover");
	        var subList = $(this).children('ul');
	        if ($.trim(subList.html()) !== "") {
	            subList.attr("aria-hidden", "true");
	        }
	    });
    }

    function closeMenuByPressingKey() {
        $(".sw-channel-item").each(function(ind) {
            $(this).keyup(function (event) {
                if (event.keyCode == 27) { // ESC
                    $(".sw-channel-dropdown").hide();
                    $(this).removeClass("hover");
                    var subList = $(this).children('ul');
                    if ($.trim(subList.html()) !== "") {
                        subList.attr("aria-hidden", "true");
                    }
                    $(this).next().find('a:first').focus();
                }
            }); 
        });

        $(".sw-channel-item a").each(function (ind) {
            $(this).parents('.sw-channel-item').keydown(function (e) {
                if (e.keyCode == 9) { // TAB
                    $(".sw-channel-dropdown").hide();
                    $(this).removeClass("hover");
                    var subList = $(this).children('ul');
                    if ($.trim(subList.html()) !== "") {
                        subList.attr("aria-hidden", "true");
                    }
                }
            });
        });

        $(".sw-channel-dropdown li").each(function(ind) {
            $(this).keydown(function (event) {
                if (event.keyCode == 9) { // TAB
                    $(".sw-channel-dropdown").hide();
                    var parentMenuItem = $(this).parent().closest('li');
                    parentMenuItem.removeClass("hover");
                    var subList = parentMenuItem.children('ul');
                    if ($.trim(subList.html()) !== "") {
                        subList.attr("aria-hidden", "true");
                    }
                    parentMenuItem.next().find('a:first').focus();
                    event.preventDefault();
                    event.stopPropagation();
                }

                if (event.keyCode == 37 || // left arrow
                    event.keyCode == 39) { // right arrow
                    $(".sw-channel-dropdown").hide();
                    var parentMenuItem = $(this).parent().closest('li');
                    parentMenuItem.removeClass("hover");
                    var subList = parentMenuItem.children('ul');
                    if ($.trim(subList.html()) !== "") {
                        subList.attr("aria-hidden", "true");
                    }
                    if (event.keyCode == 37) {
                        parentMenuItem.prev().find('a:first').focus();
                    } else {
                        parentMenuItem.next().find('a:first').focus();
                    }
                    event.preventDefault();
                    event.stopPropagation();
                }
            });
        });
    }

</script>


		</section>
	</nav>
	
	
	
	
	<main id="spn-content-outer">
		<section id="spn-content" class="ui-clear max-width">
			<!-- Start Centricity Content Area --><div id="sw-content-layout-wrapper" class="ui-spn ui-print" role="main"><a id="sw-maincontent" name="sw-maincontent" tabindex="-1"></a><div id="sw-content-layout1"><div id="sw-content-container1" class="ui-column-one region"><div id='pmi-2164'>
<div id="module-content-4397" >
<link rel="Stylesheet" type="text/css" href="https://www.allenisd.org/Static/V2_19_07//site/assets/styles/fullcalendar.css" />

<style type="text/css">
	span.fc-event-title.ellipsis {
		-moz-binding: url('https://www.allenisd.org//cms/Module/Calendar/ellipsis.xml#ellipsis');
	}
	
	#calendar-pnl-toolbar select {
	    margin: 0 0 10px 0;
	}
</style>

<script type="text/javascript" src="https://www.allenisd.org/Static/V2_19_07//GlobalAssets/Scripts/ThirdParty/jquery.fullcalendar1.6.1.js"></script>
<script type="text/javascript" src="https://www.allenisd.org/Static/V2_19_07//GlobalAssets/Scripts/ThirdParty/jquery.dropdown.js"></script>
<script type='text/javascript'>
    eventDateID = 0;
    currentMonth = 0;
    currentYear = 0;

    $(document).ready(function() {		   
        // ADA click events
        $("#calendar-pnl-filter-toggle a").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-print").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#A1").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-calendarfollow").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-icalfed").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-change-today").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-change-day").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-change-week").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-change-month").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#ui-btn-calendarlist-list").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#ui-btn-calendarlist-back").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#ui-btn-calendarlist-forward").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".calendar-filter-btn").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".category-filter-btn").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(document).on('click', '.ui-datepicker-calendar td a', function() {
            fixADA();
        });

        $(document).on('click', '.ui-datepicker-calendar td a', function() {
            fixADA();
        });

		// Don't show the sidebar if the width is not greater than 900 px.
	    var intCalendarWidth = $("#calendar-pnl-calendarcontainer").width();

	    if (intCalendarWidth < 900 ) {
			$("#calendar-pnl-smcalendar").addClass('ui-helper-hidden')
		}
			
		var thisYear = new Date().getFullYear();
	    
	    var thisMonth;
	    //if (eventDateID > 0) {
	    //	thisMonth = 8;
	    //} else {
	    	thisMonth = new Date().getMonth();
	    //}

	    $('#calendarlist-month').val(thisMonth + 1).change();

	    //function LoadEventPrint() {	
        //		var view = $('#calendar').fullCalendar('getView');
    //		var month = $('#calendar').fullCalendar('getmonth');
//		var date = $('#calendar').fullCalendar('getdate');
//		var year = $('#calendar').fullCalendar('getyear');
//		if(!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')){
//			view = "list";
//			month = $('#calendarlist-month').val() - 1;
//            year = $('#calendarlist-year').val();
//		} 
//		
//OpenWindow('https://www.allenisd.org//site/UserControls/Calendar/CalendarPrint.aspx?ModuleInstanceID=4397&PageID=9568&Date=' + date + '&Month=' + month + '&Year=' + year + '&View=' + view, 'PrintCalendar', 'width=' + (screen.width - 100) + ',height=' + (screen.height - 100) + ',menubar=yes');
	    // }

        //remove extra datepicker div that gets added into footer
	    if ($('#ui-datepicker-div').length){
	        $('#ui-datepicker-div').hide();
	    }

        $('#calendar').fullCalendar({
	        editable: false,
	        header: {
	            left: '',
	            center: 'title',
	            right: ''
	        },
            month: new Date().getMonth(),
            date: new Date().getDate(),
            year: new Date().getFullYear(),
            defaultView: 'month',
	        weekMode: 'liquid',
	        timeFormat: 'h:mmtt',
	        events: function(start, end, callback) {
                $.ajax({
                    type: "POST",
                    url: "https://www.allenisd.org//site/UserControls/Calendar/CalendarController.aspx/GetEvents",
                    data: "{ModuleInstanceID: 4397, " +
                                "StartDate: '" + (parseInt(start.getMonth()) + 1) + "/" + start.getDate() + "/" + start.getFullYear() +  "', " +
                                "EndDate: '" + (parseInt(end.getMonth()) + 1) + "/" + end.getDate() + "/" + end.getFullYear() + "'}", 
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    cache: false,
                    success: function(result) { 
                        var calevents = eval(result.d);
	                    callback(calevents);
						$('.fc-event-title').addClass('ellipsis');
                    }
                });
	        }, 
	        eventClick: function(calEvent, jsEvent, view) {
	            if ($(this).hasClass('fc-event-more')) {
	                $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');

	                // get weekday and date
	                var dayClass;
	                var dateClass = 'fc-day' + (calEvent.start.getDate() - 1);

	                switch (calEvent.start.getDay()) {
	                    case 0:
	                        dayClass = 'fc-sun';
	                        break;
	                    case 1:
	                        dayClass = 'fc-mon';
	                        break;
	                    case 2: 
	                        dayClass = 'fc-tue';
	                        break;
	                    case 3:
	                        dayClass = 'fc-wed';
	                        break;
	                    case 4:
	                        dayClass = 'fc-thu';
	                        break;
	                    case 5:
	                        dayClass = 'fc-fri';
	                        break;
	                    case 6:
	                        dayClass = 'fc-sat';
	                        break;
	                }

	                $('td.' + dayClass + '.' + dateClass).addClass('fc-active-day').attr('m', calEvent.start.getMonth()).attr('d', calEvent.start.getDate()).attr('y', calEvent.start.getFullYear());
	                ChangeView('basicDay', calEvent.start);
	            } else {
                    LoadEventDetail(calEvent.id);
	            }
	        },
	        eventMouseover: function(calEvent, jsEvent, view) {
	            ShowEventOverlay(this, calEvent.id, calEvent.eventid, calEvent.recurringevent, calEvent.title, calEvent.start, calEvent.end, calEvent.noendtime);
	        },
	        eventMouseout: function() {
	            $('#calendar-event-overlay').remove();
	        },
	        dayClick: function(dayDate, allDay, jsEvent, view) {
	            // highlight the day and set it to active
	            $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
	            $(this).addClass('fc-active-day').attr('m', dayDate.getMonth()).attr('d', dayDate.getDate()).attr('y', dayDate.getFullYear());
	        },
	        dayRender: function(date, cell) {
	            cell.bind('dblclick', function() {
	                $('#calendar').fullCalendar('changeView', 'basicDay');
	                $('#calendar').fullCalendar('gotoDate', date);
	            });
	        },
	        viewDisplay: function(view) {
	            var startDate = new Date();
	            var endDate = new Date();

	            startDate = view.start;
	            endDate = view.end;

	            var view = $('#calendar').fullCalendar('getView');

	            // if month view, save month
	            if (view.name == 'month') {
	                var d = $('#calendar').fullCalendar('getDate');
                    
	                currentMonth = $.fullCalendar.formatDate(d, 'M');
	                currentYear = $.fullCalendar.formatDate(d, 'yyyy');

	                currentMonth = currentMonth - 1;

	                /*currentMonth = $('#calendar').fullCalendar('getmonth');
	                currentYear = $('#calendar').fullCalendar('getyear');*/

	                $('#calendarlist-month').val(currentMonth + 1);
	                ChangeYearDropDown(currentYear);
                    $("#calendar-pnl-title h1").text(getFullMonth(currentMonth + 1) + " " + currentYear);
	            } else if (view.name == 'basicWeek') {
                    // select day
                    if ('' == 'basicWeek') {
                        var curdate = new Date(0, 0, 0);
                        var dateClass = 'fc-day' + curdate.getDay();
                        $('td.' + dateClass).addClass('fc-active-day').attr('m', curdate.getMonth()).attr('d', curdate.getDate()).attr('y', curdate.getFullYear());
                    }

	                // first see if week falls inside same month
	                if (startDate.getMonth() == endDate.getMonth()) {
	                    $('#calendarlist-month').val(startDate.getMonth() + 1);
	                    ChangeYearDropDown(startDate.getFullYear());
                        $("#calendar-pnl-title h1").text(getFullMonth(startDate.getMonth() + 1) + " " + startDate.getFullYear());
	                } else {
	                    // see if part of original month still shows
	                    if ((startDate.getMonth() == currentMonth && startDate.getFullYear() == currentYear) || (endDate.getMonth() == currentMonth && endDate.getFullYear() == currentYear)) {
	                         $('#calendarlist-month').val(currentMonth + 1);
	                         ChangeYearDropDown(currentYear);
                             $("#calendar-pnl-title h1").text(getFullMonth(currentMonth + 1) + " " + currentYear);
	                    } else {
	                        // moved away from that month, see which month covers more area
	                        if (endDate.Date < 3) {
	                            $('#calendarlist-month').val(endDate.getMonth() + 1);
	                            ChangeYearDropDown(endDate.getFullYear());
                                $("#calendar-pnl-title h1").text(getFullMonth(endDate.getMonth() + 1) + " " + endDate.getFullYear());
	                        } else {
	                            $('#calendarlist-month').val(startDate.getMonth() + 1);
	                            ChangeYearDropDown(startDate.getFullYear());
                                $("#calendar-pnl-title h1").text(getFullMonth(startDate.getMonth() + 1) + " " + startDate.getFullYear());
	                        }
	                    }
	                }
	            } else if (view.name == 'basicDay') {
	                $('#calendarlist-month').val(startDate.getMonth() + 1);
	                ChangeYearDropDown(startDate.getFullYear());
                    $("#calendar-pnl-title h1").text(getFullMonth(startDate.getMonth() + 1) + " " + startDate.getFullYear());
	            }
	            
	           //alert('finished - dropdown says ' + $('#calendarlist-month').val() + ', calendar says ' + $('#calendar').fullCalendar('getmonth'));
	            
				if ($('#calendar-pnl-smcalendar').is(':visible')) {
				    var d = $('#calendar').fullCalendar('getDate');
                    
				    var myMonth = $.fullCalendar.formatDate(d, 'M');
				    var myYear = $.fullCalendar.formatDate(d, 'yyyy');
                    var myDay = $.fullCalendar.formatDate(d, 'd');

				    myMonth = myMonth - 1;

                    $('#small-calendar-1').datepicker('setDate', new Date(myYear, myMonth));
				}

				// set toggle button classes
				$('#calendarview-toggle a').removeClass('active');

				switch (view.name) {
					case 'month':
						$('#calendarview-toggle a.month').addClass('active');
						break;
					case 'basicWeek':
						$('#calendarview-toggle a.week').addClass('active');
						break;
					case 'basicDay':
						$('#calendarview-toggle a.day').addClass('active');
						break;
				}
	        },
            eventRender: function(event, eventElement) {
                var view = $('#calendar').fullCalendar('getView');

                eventElement.attr('tabIndex', 0);

                eventElement.css("backgroundColor", event.CategoryColor);
                eventElement.css("borderColor", event.CategoryColor);

                eventElement.keydown(function(e) {
                    e.stopImmediatePropagation();

                    if (e.keyCode == 13) {
                        LoadEventDetail(event.id);
                    }
                });

                adjustColour(eventElement);

                if (event.nativeevent == 0) {
                    eventElement.addClass('calendarevent-locked');
                } else if (event.registration.toLowerCase() == "true") {
                    eventElement.addClass('calendarevent-register');
                } else if (event.mandatory.toLowerCase() == "true") {
                    eventElement.addClass('calendarevent-mandatory');
                }

                // check for dates to display that are spanning and in current month only
                // hide all single day events that don't fall in current month
                if (view.name == "month") {
                    var d = $('#calendar').fullCalendar('getDate');
                    var currentMonth = $.fullCalendar.formatDate(d, 'M');

                    var eventStartYear = $.fullCalendar.formatDate(event.start, "yyyy");
                    var eventEndYear = $.fullCalendar.formatDate(event.end, "yyyy");

                    var eventStartMonth = $.fullCalendar.formatDate(event.start, "M");
                    var eventEndMonth = $.fullCalendar.formatDate(event.end, "M");

                    if (eventEndYear == eventStartYear) {
                        if (eventStartMonth != currentMonth) {
                            /*if (event.start.getDate() - event.end.getDate() == 0) {
                                eventElement.addClass("ui-helper-hidden");
                            }*/

                            if ((parseInt(eventStartMonth, 10) > parseInt(currentMonth, 10)) || (parseInt(eventEndMonth, 10) < parseInt(currentMonth, 10))) {
                                eventElement.addClass("ui-helper-hidden");
                            }
                        }
                    }
                }
	        }
        });

        // set up small calendars
        $('#small-calendar-1').datepicker({ 
            dayNamesMin: ['', '', '', '', '', '', ''],
            numberOfMonths: [3, 1],
            monthNames: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            onSelect: function(dateText, inst) { 
                var myDate = new Date(dateText);

                $('#calendar').fullCalendar('changeView', 'basicDay');
                $('#calendar').fullCalendar('gotoDate', myDate);
            }
        });
        
        $(document).on('click', '#calendar-tbl-calendars .ui-datepicker-title', function() {
            var tempMonth = $.trim($(this).text()).substring(0, 3);
            var myMonth = 0;
            var myYear = $.trim($(this).text()).substring(3);

            switch (tempMonth.toLowerCase()) {
                case 'jan':
                    myMonth = 0;
                    break;
                 case 'feb':
                    myMonth = 1;
                    break;
                 case 'mar':
                    myMonth = 2;
                    break;
                 case 'apr':
                    myMonth = 3;
                    break;
                 case 'may':
                    myMonth = 4;
                    break;
                 case 'jun':
                    myMonth = 5;
                    break;
                 case 'jul':
                    myMonth = 6;
                    break;
                 case 'aug':
                    myMonth = 7;
                    break;
                 case 'sep':
                    myMonth = 8;
                    break;
                 case 'oct':
                    myMonth = 9;
                    break;
                 case 'nov':
                    myMonth = 10;
                    break;
                 case 'dec':
                    myMonth = 11;
                    break;
            }

            var myDate = new Date(parseInt(myYear), parseInt(myMonth));// parseInt necessary for safari

            $('#calendar').fullCalendar('changeView', 'month');
            $('#calendar').fullCalendar('gotoDate', myDate);
            
            if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
                myMonth = myMonth + 1;
                                
                $('#calendarlist-month').val(myMonth).change();
                $('#calendarlist-year').val($.trim(myYear)).change();
                
                if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
                    LoadEventListView(4397, myMonth, myYear);
                }

                if ($('#calendar-pnl-smcalendar').is(':visible')) {
			        $('#small-calendar-1').datepicker('setDate', new Date(myYear, myMonth - 1));
				}
			}
        });
        
	    $(document).on('click', '#calendar-btn-myevents', function() {
            OpenDialogOverlay("WindowLargeModal", { LoadType: "U", LoadURL: "https://www.allenisd.org//site/UserControls/Calendar/MyEventsWrapper.aspx?ModuleInstanceID=4397" });
        });

	    $(document).on('click', '#calendar-btn-legend', function() {
            OpenDialogOverlay("WindowMediumModal", { LoadType: "U", LoadURL: "https://www.allenisd.org//site/UserControls/Calendar/CategoryLegendWrapper.aspx?ModuleInstanceID=4397" });
        });
        
	    $(document).on('click', '#eventexport-btn-save', function() {
		   $('#calendarexport-pnl-detail').validate({ onSuccess: EventDetailExportByDateRange });
		});
       
        if ('' == 'list') {
            LoadEventListView(4397, 0, 0);
        }
        
	    $(document).on('click', '#myeventslist-btn-filter', function() {
            $('#myeventslist-pnl-toolbar').validate({ onSuccess: SearchMyEvents });
        });
        
	    $(document).on('change', '#calendarlist-month, #calendarlist-year', function() {
            $("#calendar-pnl-title h1").text(getFullMonth($('#calendarlist-month').val()) + " " + $('#calendarlist-year').val());
	    });

	    $('#calendar').fullCalendar('render');

        // remove table header for ADA compliance
        // add tabindex for table cells
	    fixADA();
   }); // end document ready
   
    function fixADA() {
        $(".ui-datepicker-calendar thead").remove();
        $(".ui-datepicker-calendar td").attr("tabindex", 0);
    }

    function ChangeYearDropDown(year) {
        var addedYear = false;
        if ( year < parseInt($('#sel-calendarlist-year li:first').attr('itemid'))) {
            $('<li itemid="' + year + '">' + year + '</li>').insertBefore("#sel-calendarlist-year li:first");
            addedYear = true;
        } else if (year > parseInt($('#sel-calendarlist-year li:last').attr('itemid'))) {
            $("#sel-calendarlist-year").append('<li itemid="' + year + '">' + year + '</li>');
            addedYear = true;
        }

        $('#calendarlist-year').val(year);

        Month = $('#calendarlist-month').val();
        Year = $('#calendarlist-year').val();

        if($('#sel-calendarlist-month li.selected').attr('itemid') != Month) {
            $('#sel-calendarlist-month li.selected').attr('class', '');
            $('#sel-calendarlist-month li[itemid="'+Month+'"]').addClass('selected');
            $('#selectedsel-calendarlist-month').children('span').text($('#sel-calendarlist-month li.selected').text());
        }

        if($('#sel-calendarlist-month li.selected').text() != $('#selectedsel-calendarlist-month').children('span').text()) {
            $('#selectedsel-calendarlist-month').children('span').text($('#sel-calendarlist-month li.selected').text());
        }

        if(addedYear) {
            attachClickEvents('sel-calendarlist-year', $('#sel-calendarlist-year').find('li'), $('#calendarlist-year'), $('#selectedsel-calendarlist-year'));

            $('#sel-calendarlist-year li[itemid="'+Year+'"]').not('.noselect').click(function(e) {
                ChangeYear();
                $('#selectedsel-calendarlist-year').children('span').text(Year);
            });
        }

        if($('#sel-calendarlist-year li.selected').attr('itemid') != Year) {
           $('#sel-calendarlist-year li.selected').attr('class', '');
           $('#sel-calendarlist-year li[itemid="'+Year+'"]').addClass('selected');
           $('#selectedsel-calendarlist-year').children('span').text($('#sel-calendarlist-year li.selected').text());
        }
    }

	function ChangeView(type, eDate) {
        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {                    
            $('#calendarlist-pnl-specialview').addClass('ui-helper-hidden');
            $('#calendar').removeClass('ui-helper-hidden');
            setTimeout("$('#calendar').fullCalendar('refetchEvents');", 500);
        }

        if (eDate !== undefined) { // clicked 'more' link
            var gotoDate = new Date(eDate.getFullYear(), eDate.getMonth(), eDate.getDate());

            $('#calendar').fullCalendar('gotoDate', gotoDate);
            $('#calendar').fullCalendar('changeView', type);
        } else if ($('#calendar').find('.fc-active-day').length > 0) { // active day
			var activeDay = $('td.fc-active-day');
			var gotoDate = new Date(activeDay.attr('y'), activeDay.attr('m'), activeDay.attr('d'));

			$('#calendar').fullCalendar('gotoDate', gotoDate);
            $('#calendar').fullCalendar('changeView', type);
        } else { // go to view w/o changing
            var gotoDate = new Date($('#calendarlist-year').val(), ($('#calendarlist-month').val() - 1), 1);
            $('#calendar').fullCalendar('gotoDate', gotoDate);
            $('#calendar').fullCalendar('changeView', type);
        }

	    // remove table header for ADA compliance
	    // add tabindex for table cells
        fixADA();
    }
	
	function LoadEventDetail(eventDateID, userRegID, isEdit) {
	    (userRegID === undefined ? userRegID = 0 : '');
	    (isEdit === undefined ? isEdit = false : '');
	   
        var isListView = !$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')
        var currentView = $('#calendar').fullCalendar('getView');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            currentView = 'list';
        } else {
            currentView = currentView.name;
        }

        /*var currentDate = $('#calendar').fullCalendar('getdate');
        var currentMonth = $('#calendar').fullCalendar('getmonth');
        var currentYear = $('#calendar').fullCalendar('getyear');*/

        var currentDate = $('#calendar').fullCalendar('getDate');
        var currentMonth = $.fullCalendar.formatDate(currentDate, 'M');
        var currentYear = $.fullCalendar.formatDate(currentDate, 'yyyy');

        currentMonth = currentMonth - 1;

        parent.location.href = "https://www.allenisd.org//site/Default.aspx?PageID=9568&PageType=17&DomainID=1654&ModuleInstanceID=4397&EventDateID=" + eventDateID + "&CurrentView=" + currentView; //"&UserRegID=" + userRegID + "&IsEdit=" + isEdit;
    }
	
	function ShowEventOverlay(obj, eventDateID, eventID, recurring, title, start, end, noEndTime) {
        $this = $(obj);
        $('#calendar-event-overlay').remove();

        // get date for display
		var startDate = (start.getMonth() + 1) + '/' + start.getDate() + '/' + start.getFullYear();
		var endDate = "";
	    //if (end !== null) {
		    endDate = (end.getMonth() + 1) + '/' + end.getDate() + '/' + end.getFullYear();
        //} else endDate = startDate;
		
		var strDate = "";
		var allDay = false;
		//var noEndTime = false;
		
		// get times
		var startHour = start.getHours().toString();
		var startMinute = start.getMinutes().toString();

		var startTime = (startHour < 12 ? (startHour.length == 2 ? startHour : (startHour == "0" ? "12" : "0" + startHour)) + ":" + (startMinute.length == 2 ? startMinute : "0" + startMinute) + " am" : ((startHour - 12).toString().length == 2 ? startHour - 12 : (startHour - 12 == 0 ? "12" : "0" + (startHour - 12))) + ":" + (startMinute.length == 2 ? startMinute : "0" + startMinute) + " pm");
		
		var endHour = "";
		var endMinute = "";

	    if (end !== null) {
		    endHour = end.getHours().toString();
		    endMinute = end.getMinutes().toString();
	    } else {
		    endHour = "00";
		    endMinute = "00";
	    }

        var endTime = (endHour < 12 ? (endHour.length == 2 ? endHour : "0" + endHour) + ":" + (endMinute.length == 2 ? endMinute : "0" + endMinute) + " am" : ((endHour - 12).toString().length == 2 ? endHour - 12 : (endHour - 12 == 0 ? "12" : "0" + (endHour - 12))) + ":" + (endMinute.length == 2 ? endMinute : "0" + endMinute) + " pm");
		
        // check if all day
		if (startTime == "12:00 am" && endTime == "11:59 pm") {
			allDay = true;
		}
		
		// check no end time for migrated data
	    //if (endTime == "00:00 am") {
		//    noEndTime = true;
	    //}
	
		// set start date
		strDate += startDate;

		// add time if not all day
		if (allDay == false) {
			strDate += ' ' + startTime;
		}

		// if not same day, add end date
		if (startDate != endDate) {
			strDate += ' to ' + endDate;
		}

		// add end time if not all day
		if (allDay == false && noEndTime == false) {
			if (startDate != endDate) {
				strDate += ' ' + endTime;
			} else {
				strDate += ' to  ' + endTime;
			}
		}

		// check title length and add ellipsis if necessary
		if (title.length > 70) {
		    title = title.substring(0, 69) + '...';
		}

	    $('body').append('<div id="calendar-event-overlay"><h1>' + title.replace(/&/g, '&amp').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;')  + "</h1><h2> " + strDate + '</h2><div class="arrow"></div></div>');
        
        $(document).on('click', function() {
            $('#calendar-event-overlay').remove();
        });

        $('#calendar-event-overlay').css({
            'left': ($this.offset().left - ($('#calendar-event-overlay').outerWidth() / 2) + 
                ($this.outerWidth() / 2)) + 'px',
            'top': ($this.offset().top - $('#calendar-event-overlay').outerHeight() - 18) + 'px'
        }).bind('mouseleave', function() {
            $(this).remove();
        });
	}

    function EditMyEventRegistration(eventDateID, userRegID) {
        //LoadEventRegistrationEdit(userRegID);
        LoadEventDetail(eventDateID, userRegID, true)
    }
    
    function RemoveMyEventRegistration(userRegID,EventDateID) {
        //var data = "{userRegID:" + userRegID + ", EventDateID:" + EventDateID + "}";
        swalert('Are you sure you want to remove this registration?','Remove Registration','critical','yesno',YesRemoveMyEventRegistration,'','',{userRegID:userRegID,EventDateID:EventDateID});
    }
    
    function YesRemoveMyEventRegistration(userData) {
        var data = "{UserRegistrationID: " + userData.userRegID  + ", EventDateID: " + userData.EventDateID + "}";
        var StartDate;
        var EndDate;

        if ($('#myeventslist-txt-startdate').val() == '') {
            StartDate = '1/1/1900';
        } else {
            StartDate = $('#myeventslist-txt-startdate').val();
        }

        if ($('#myeventslist-txt-enddate').val() == '') {
            EndDate = '1/1/1900';
        } else {
            EndDate = $('#myeventslist-txt-enddate').val();
        }       
              
        if (StartDate != '1/1/1900') {
            StartDate += ' 0:00:00';
        }

        if (EndDate != '1/1/1900') {
            EndDate += ' 23:59:59';
        }

        var success = 'GetContent("https://www.allenisd.org//site/UserControls/Calendar/MyEventsListWrapper.aspx?ModuleInstanceID=4397&StartDate=' + StartDate + '&EndDate=' + EndDate + '", "myeventslist-pnl-detail", 2, ""); ShowNotification("Success! You have deleted your registration for this event.");';
        var failure = 'CallControllerFailure(result[0].errormessage);';
        
        CallController("https://www.allenisd.org//site/UserControls/Calendar/CalendarController.aspx/DeleteRegistration", data, success, failure);
    } 
       
    function LoadEventListView(ModuleInstanceID, Month, Year) {
		$('#calendarview-toggle a').removeClass('active');
		$('#calendarview-toggle a.list').addClass('active');

        var itemid = $('#calendarlist-month').val();
        var gotoDate = new Date($('#calendarlist-year').val(), (itemid - 1), 1);
        $('#calendar-pnl-title h1').text(gotoDate.toLocaleString("en-us", { month: "long" }) + ' ' + $('#calendarlist-year').val());

        $('#calendarlist-pnl-specialview').removeClass('ui-helper-hidden');
        $('#calendar').addClass('ui-helper-hidden');

        Month = $('#calendarlist-month').val();
        Year = $('#calendarlist-year').val();

        GetContent("https://www.allenisd.org//site/UserControls/Calendar/EventListViewWrapper.aspx?ModuleInstanceID=" + ModuleInstanceID + "&Month=" + Month + "&Year=" + Year, "calendarlist-pnl-specialview", 2, '');
    }

    function ChangeMonth() { 
        var itemid = $('#calendarlist-month').val();
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        var gotoDate = new Date($('#calendarlist-year').val(), (itemid - 1), 1);
        $('#calendar').fullCalendar('gotoDate', gotoDate);

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(4397, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        }
        
        if ($('#calendar-pnl-smcalendar').is(':visible')) {
	        $('#small-calendar-1').datepicker('setDate', new Date($('#calendarlist-year').val(), parseInt($('#calendarlist-month').val()-1)));
        }    
        
        ChangeYearDropDown($('#calendarlist-year').val());

        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }

    function ChangeYear(itemid) { 
		var itemid = $('#calendarlist-year').val();
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        var gotoDate = new Date(itemid, ($('#calendarlist-month').val() - 1), 1);
        $('#calendar').fullCalendar('gotoDate', gotoDate);

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(4397, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        }
        
        if ($('#calendar-pnl-smcalendar').is(':visible')) {
		    $('#small-calendar-1').datepicker('setDate', new Date($('#calendarlist-year').val(), parseInt($('#calendarlist-month').val()-1)));
        }

        ChangeYearDropDown($('#calendarlist-year').val());
        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }

    function GoToNext() {
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        $('#calendar').fullCalendar('next');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            var month = parseInt($('#calendarlist-month').val()) + 1;
            var year = parseInt($('#calendarlist-year').val());

            if (month > 12) {
                month = 1;
                year = year + 1;
            }

            $('#calendarlist-month').val(month).change();
            ChangeYearDropDown(year);
            $('#calendarlist-year').val(year).change();
            
            if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
                LoadEventListView(4397, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
            }

            if ($('#calendar-pnl-smcalendar').is(':visible')) {
				$('#small-calendar-1').datepicker('setDate', new Date($('#calendarlist-year').val(), parseInt($('#calendarlist-month').val())-1));
			}
        }

        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }
    
    function GoToPrevious() {
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        $('#calendar').fullCalendar('prev');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            var month = $('#calendarlist-month').val() - 1;
            var year = $('#calendarlist-year').val();

            if (month < 1) {
                month = 12;
                year = year - 1;
            }

            $('#calendarlist-month').val(month).change();
            ChangeYearDropDown(year);
            $('#calendarlist-year').val(year).change();
            
            if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
                LoadEventListView(4397, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
            }

            if ($('#calendar-pnl-smcalendar').is(':visible')) {
				$('#small-calendar-1').datepicker('setDate', new Date($('#calendarlist-year').val(), parseInt($('#calendarlist-month').val())-1));
			}
        }

        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }
    
    function GoToToday() {
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        $('#calendar').fullCalendar('today');
        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(4397, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        }

        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }

    function LoadEventPrint() {
        var view = $('#calendar').fullCalendar('getView');
        view = view.name;

		/*var month = $('#calendar').fullCalendar('getmonth');
		var date = $('#calendar').fullCalendar('getdate');
		var year = $('#calendar').fullCalendar('getyear');*/

        var date = $('#calendar').fullCalendar('getDate');
        var month = $.fullCalendar.formatDate(date, 'M');
        var day = $.fullCalendar.formatDate(date, 'd');
        var year = $.fullCalendar.formatDate(date, 'yyyy');

        month = month - 1;

		if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
			view = "list";
			month = $('#calendarlist-month').val() - 1;
            year = $('#calendarlist-year').val();
		} 
		
		OpenWindow('https://www.allenisd.org//site/UserControls/Calendar/CalendarPrint.aspx?ModuleInstanceID=4397&PageID=9568&DomainID=1654&Date=' + day + '&Month=' + month + '&Year=' + year + '&View=' + view, 'PrintCalendar', 'width=' + (screen.width - 100) + ',height=' + (screen.height - 100) + ',menubar=yes,scrollbars=yes,top=0,left=0,resizable=yes');
    }
	
    function ToggleEventListDetail() {
        if ($('#eventlist-chk-toggledetail').is(':checked')) {
            $('.ui-eventlistview-detail').removeClass('ui-helper-hidden');
        } else {
            $('.ui-eventlistview-detail').addClass('ui-helper-hidden');
        }
    }

    function LoadEventExportByDateRange() {
        OpenDialogOverlay("WindowMediumModal", { LoadType: "U", LoadURL: "https://www.allenisd.org//site/UserControls/Calendar/EventExportByDateRangeWrapper.aspx" });
    }

    function EventDetailExportByDateRange() {
        var eventDate = new Date($('#eventexport-txt-startdate').val());
        var endDate = new Date($('#eventexport-txt-enddate').val());
                
        if (endDate < eventDate) {
            swalert('The start date must come before the end date.', 'Attention', 'warning', 'ok');
            return false;
        }

        document.location.href = "https://www.allenisd.org//site/UserControls/Calendar/EventExport.aspx?ModuleInstanceID=4397&StartDate=" + $('#eventexport-txt-startdate').val() + "&EndDate=" + $('#eventexport-txt-enddate').val();
        CloseDialogOverlay('WindowMediumModal');
    }

    function getFullMonth(monthValue) {
        monthValue = parseInt(monthValue);
        var fullMonth = "";

        switch(monthValue) {
            case 1:
                fullMonth = "January";
                break;
            case 2:
                fullMonth = "February";
                break;
            case 3:
                fullMonth = "March";
                break;
            case 4:
                fullMonth = "April";
                break;
            case 5:
                fullMonth = "May";
                break;
            case 6:
                fullMonth = "June";
                break;
            case 7:
                fullMonth = "July";
                break;
            case 8:
                fullMonth = "August";
                break;
            case 9:
                fullMonth = "September";
                break;
            case 10:
                fullMonth = "October";
                break;
            case 11:
                fullMonth = "November";
                break;
            case 12:
                fullMonth = "December";
                break;
        }

        return fullMonth;
    }
    
    function SearchMyEvents() {
        var StartDate;
        var EndDate;

        if ($('#myeventslist-txt-startdate').val() == '') {
            StartDate = '1/1/1900';
        } else {
            StartDate = $('#myeventslist-txt-startdate').val();
        }

        if ($('#myeventslist-txt-enddate').val() == '') {
            EndDate = '1/1/1900';
        } else {
            EndDate = $('#myeventslist-txt-enddate').val();
        }
        
        if ((StartDate != '1/1/1900') && (EndDate != '1/1/1900')) {
            if (new Date(StartDate) > new Date(EndDate)) {
                swalert('The start date must come before the end date.', 'Attention', 'warning', 'ok', '', '', '');
                return false;
            }
        } else if ((EndDate != '1/1/1900') && (StartDate == '1/1/1900')) {
            var CurrentDate = new Date();

            StartDate = (parseInt(CurrentDate.getMonth()) + 1) + "/" + CurrentDate.getDate() + "/" + CurrentDate.getFullYear();

            if (new Date(StartDate) > new Date(EndDate)) {
                swalert('The end date must come after the current date.', 'Attention', 'warning', 'ok', '', '', '');
                return false;
            }
        }
              
        if (StartDate != '1/1/1900') {
            StartDate += ' 0:00:00';
        }

        if (EndDate != '1/1/1900') {
            EndDate += ' 23:59:59';
        }

        GetContent("https://www.allenisd.org//site/UserControls/Calendar/MyEventsListWrapper.aspx?ModuleInstanceID=4397&StartDate=" + StartDate + "&EndDate=" + EndDate, "myeventslist-pnl-detail", 2, '');
    }

    function RefreshCalendarFilter() {
        if ($('#calendar-pnl-calendarfilter-closed').is(':visible')) {
            GetContent("https://www.allenisd.org//site/UserControls/Calendar/CalendarFilterListWrapper.aspx?ModuleInstanceID=" + "4397" + "&Expanded=" + false, "calendar-pnl-calendarfilter-closed", 2);
        } else {
            GetContent("https://www.allenisd.org//site/UserControls/Calendar/CalendarFilterListWrapper.aspx?ModuleInstanceID=" + "4397" + "&Expanded=" + true, "calendar-pnl-calendarfilter-open", 2);             
        }
    }
    
    function ToggleCalendarFilter(expanded) {
        if (expanded === undefined) {
            expanded = $('#calendar-pnl-calendarfilter-closed').is(':visible');
        }

        if (expanded === true) {
            var callback = "$('#calendar-pnl-calendarfilter-closed').fadeOut('fast',function() { $('#calendar-pnl-calendarfilter-open').fadeIn('fast');});";
            GetContent("https://www.allenisd.org//site/UserControls/Calendar/CalendarFilterListWrapper.aspx?ModuleInstanceID=" + "4397" + "&Expanded=" + true, "calendar-pnl-calendarfilter-open", 3, callback);
        } else {
            var callback = "$('#calendar-pnl-calendarfilter-open').fadeOut('fast',function() { $('#calendar-pnl-calendarfilter-closed').fadeIn('fast');});";
            GetContent("https://www.allenisd.org//site/UserControls/Calendar/CalendarFilterListWrapper.aspx?ModuleInstanceID=" + "4397" + "&Expanded=" + false, "calendar-pnl-calendarfilter-closed", 3, callback); 
        }
    }

    function OpenCalendarFilter() {
        OpenDialogOverlay("WindowLargeModal", { LoadType: "U", LoadURL: "https://www.allenisd.org//site/UserControls/Calendar/CalendarFilterNewWrapper.aspx?DomainID=1654&ModuleInstanceID=4397" });
    }

    function RefreshCategoryFilter() {
        if ($('#calendar-pnl-categoryfilter-closed').is(':visible')) {
            GetContent("https://www.allenisd.org//site/UserControls/Calendar/CategoryFilterListWrapper.aspx?ModuleInstanceID=" + "4397" + "&Expanded=" + false, "calendar-pnl-categoryfilter-closed", 2);
        } else {
            GetContent("https://www.allenisd.org//site/UserControls/Calendar/CategoryFilterListWrapper.aspx?ModuleInstanceID=" + "4397" + "&Expanded=" + true, "calendar-pnl-categoryfilter-open", 2);             
        }
    }

    function ToggleCategoryFilter(expanded) {
        if (expanded === undefined) {
            expanded = $('#calendar-pnl-categoryfilter-closed').is(':visible');
        }

        if (expanded === true) {
            var callback = "$('#calendar-pnl-categoryfilter-closed').fadeOut('fast',function() { $('#calendar-pnl-categoryfilter-open').fadeIn('fast');});";
            GetContent("https://www.allenisd.org//site/UserControls/Calendar/CategoryFilterListWrapper.aspx?ModuleInstanceID=" + "4397" + "&Expanded=" + true, "calendar-pnl-categoryfilter-open", 3, callback);
        } else {
             var callback = "$('#calendar-pnl-categoryfilter-open').fadeOut('fast',function() { $('#calendar-pnl-categoryfilter-closed').fadeIn('fast');});";
             GetContent("https://www.allenisd.org//site/UserControls/Calendar/CategoryFilterListWrapper.aspx?ModuleInstanceID=" + "4397" + "&Expanded=" + false, "calendar-pnl-categoryfilter-closed", 3, callback); 
         }
     }

    function OpenCategoryFilter() {
        OpenDialogOverlay("WindowLargeModal", { LoadType: "U", LoadURL: "https://www.allenisd.org//site/UserControls/Calendar/CategoryFilterNewWrapper.aspx?DomainID=1654&ModuleInstanceID=4397" });
    }

    function RemoveCalendarFilter(ModuleInstanceID) {
        $('#calendarfilter-ul-list li[itemid=' + ModuleInstanceID + ']').remove();

        var strCalendarFilter = GetCookie('CalendarFilter');
        strCalendarFilter = strCalendarFilter.replace(ModuleInstanceID + '-', '');

        SetCookie('CalendarFilter', strCalendarFilter, 365);

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(4397, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        } else {
            $('#calendar').fullCalendar('refetchEvents');
        }
    }

    function AddCategoryFilter(EventCategoryMasterID) {
        $('#categoryfilter-ul-list li[itemid=' + EventCategoryMasterID + ']').remove();

        var strCategoryFilter = GetCookie('CategoryFilter');
        strCategoryFilter = strCategoryFilter + EventCategoryMasterID + '-';

        SetCookie('CategoryFilter', strCategoryFilter, 365);

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(4397, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        } else {
            $('#calendar').fullCalendar('refetchEvents');
        }
    }

    function UpdateCalendarFilter(id) {
        var strCalendarFilter = GetCookie('CalendarFilter');

        if ($('#calendarfilter-chk-calendar' + id).is(':checked')) {
            strCalendarFilter = strCalendarFilter + id + '-';
        } else {
            strCalendarFilter = strCalendarFilter.replace(id + '-', '');
        }

        SetCookie('CalendarFilter', strCalendarFilter, 365);
    }  

    function LoadCalendarChannelList() {
        GetContent("https://www.allenisd.org//site/UserControls/Calendar/CalendarChannelListWrapper.aspx?DomainID=" + $('#calendarfilter-hid-siteid').val(), "calendarfilter-pnl-channellist", 2);
        LoadCalendarSearchList();
    }  

    function SelectFilteredCalendars() {
        var arrValues = GetCookie('CalendarFilter').split('-');
        
        $.each(arrValues, function() {
            $('#calendarfilter-chk-calendar' + this).attr('checked', true);
        });
    }   

    function LoadCalendarSearchList() {
        var DomainID = $('#calendarfilter-hid-channelid').val();

        if (DomainID == 0) {
            DomainID = $('#calendarfilter-hid-siteid').val();
        }

        GetContent("https://www.allenisd.org//site/UserControls/Calendar/CalendarSearchListWrapper.aspx?DomainID=" + DomainID + "&ModuleInstanceID=" + "4397" + "&SearchFor=" + $('#calendarfilternew-txt-search').val(), "calendarfilter-pnl-results", 2, '');
    } 

    function CloseCalendarFilter() {
        CloseDialogOverlay('WindowLargeModal');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(4397, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        } else {
            $('#calendar').fullCalendar('refetchEvents');
        }

        RefreshCalendarFilter();
    }

    function CloseCategoryFilter() {
        CloseDialogOverlay('WindowLargeModal');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(4397, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        } else {
            $('#calendar').fullCalendar('refetchEvents');
        }

        RefreshCategoryFilter();
    }

    function SelectFilteredCategories() {
        var arrValues = GetCookie('CategoryFilter').split('-');

        $.each(arrValues, function() {
            $('#categoryfilter-chk-category' + this).attr('checked', false);
        });
    }

    function UpdateCategoryFilter(id) {
        var strCategoryFilter = GetCookie('CategoryFilter');

        if ($('#categoryfilter-chk-category' + id).is(':checked')) {
            strCategoryFilter = strCategoryFilter.replace(id + '-', '');
        } else {
            strCategoryFilter = strCategoryFilter + id + '-';
        }

        SetCookie('CategoryFilter', strCategoryFilter, 365);
    }

    function toggleFilters() {
        if ($("#calendar-filter-wrapper").hasClass("open")) {
            $("#calendar-filter-wrapper").removeClass("open").addClass("closed");
            SlideUpControl('calendar-filter-wrapper');
            $("#calendar-pnl-filter-toggle-chevron").attr("src", "https://www.allenisd.org/Static/V2_19_07//GlobalAssets/Images/Icons/16/toggle-closed.png");
        } else {
            $("#calendar-filter-wrapper").removeClass("closed").addClass("open");
            SlideDownControl('calendar-filter-wrapper');
            $("#calendar-pnl-filter-toggle-chevron").attr("src", "https://www.allenisd.org/Static/V2_19_07//GlobalAssets/Images/Icons/16/toggle-open.png");
        }
    }

    function UpdateCalendarFollow() {
        var data = "{ModuleInstanceID: 4397}";
        var success = 'ShowNotification("Success! You are now following this calendar in MyView.");';
        //var failure = 'CallControllerFailure(result[0].errormessage);';
        var failure = 'ShowNotification(result[0].errormessage);';
        
        CallController("https://www.allenisd.org//site/UserControls/Calendar/CalendarController.aspx/UpdateCalendarFollow", data, success, failure);
    }
</script>

<div class="ui-widget app calendar" style="overflow: hidden;">
<div class="ui-widget-header ui-helper-hidden">
    
</div>
	
<div class="ui-widget-detail" style="overflow: hidden;">
<div id="calendar-pnl-calendarcontainer">

    <div id="calendar-pnl-toolbar">
        <div id="calendar-pnl-filter-toggle"><a onclick="toggleFilters();" tabindex="0"><span><img id='calendar-pnl-filter-toggle-chevron' src='https://www.allenisd.org/Static/V2_19_07//GlobalAssets/Images/Icons/16/toggle-closed.png' width='10' height='10' alt='Close' />Customize Calendar View</span></a></div>

        <div id="calendar-filter-wrapper" class="ui-helper-hidden closed">
        

        <div id="calendarfilter-calendar-wrapper" class="calendarfilter-wrapper">
            <div class="ui-lbl-calendarfilter">
                Calendars <a onclick="ToggleCalendarFilter();" tabindex="0" class="calendar-filter-btn">&nbsp;</a>
            </div>
            <div id="calendar-pnl-calendarfilter-open" class="calendarfilter-container open ui-helper-hidden"></div>
		    <div id="calendar-pnl-calendarfilter-closed" class="calendarfilter-container closed">
		        <ul id="calendarfilter-ul-list" class="filter-display"><li itemid="4397"><span>Calendar</span></li>
</ul>
<script type="text/javascript">
    $(document).ready(function() {
        // ADA click events
        $(".ui-calendarfilter-removefilter").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".ui-calendarfilter-addremove").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".ui-btn-toolbar").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });
    });
</script>
		    </div>
        </div>
        
        <div id="calendarfilter-category-wrapper" class="calendarfilter-wrapper">
            <div class="ui-lbl-calendarfilter">
                Categories <a onclick="ToggleCategoryFilter();" tabindex="0" class="category-filter-btn">&nbsp;</a>
            </div>
            <div id="calendar-pnl-categoryfilter-open" class="calendarfilter-container open ui-helper-hidden"></div>
            <div id="calendar-pnl-categoryfilter-closed" class="calendarfilter-container closed category">
                <script type="text/javascript">$(document).ready(function() {$('.filter-display li').each(function() {adjustColour($(this));});});</script><ul class="filter-display inline"><li style="background: rgb(225, 225, 225);"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-0' position='bottom'>&nbsp;</a><div id='categoryhover-0' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background: rgb(225, 225, 225);'>Unassigned</div></li><li style="background: #D2E27D"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-15' position='bottom'>&nbsp;</a><div id='categoryhover-15' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#D2E27D'>Academic Activity</div></li>
<li style="background: #AFDC96"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-16' position='bottom'>&nbsp;</a><div id='categoryhover-16' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#AFDC96'>Assignment Due</div></li>
<li style="background: #A5CEC6"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-9' position='bottom'>&nbsp;</a><div id='categoryhover-9' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#A5CEC6'>Athletic Event</div></li>
<li style="background: #FF9484"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-1' position='bottom'>&nbsp;</a><div id='categoryhover-1' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#FF9484'>Bad Weather Day</div></li>
<li style="background: #849CE7"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-2' position='bottom'>&nbsp;</a><div id='categoryhover-2' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#849CE7'>Board of Trustees</div></li>
<li style="background: #FFFB74"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-11' position='bottom'>&nbsp;</a><div id='categoryhover-11' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#FFFB74'>Celebrations / Special Events</div></li>
<li style="background: #FFC6E7"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-14' position='bottom'>&nbsp;</a><div id='categoryhover-14' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#FFC6E7'>Club / Organization</div></li>
<li style="background: #A9FF84"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-13' position='bottom'>&nbsp;</a><div id='categoryhover-13' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#A9FF84'>Community Education Events</div></li>
<li style="background: #ECB74A"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-17' position='bottom'>&nbsp;</a><div id='categoryhover-17' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#ECB74A'>Course A - prep 1</div></li>
<li style="background: #AFDFDF"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-20' position='bottom'>&nbsp;</a><div id='categoryhover-20' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#AFDFDF'>Course B - prep 2</div></li>
<li style="background: #5F82E0"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-24' position='bottom'>&nbsp;</a><div id='categoryhover-24' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#5F82E0'>Daily</div></li>
<li style="background: #D6CE84"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-7' position='bottom'>&nbsp;</a><div id='categoryhover-7' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#D6CE84'>Fine Arts Event</div></li>
<li style="background: #E7E7D6"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-4' position='bottom'>&nbsp;</a><div id='categoryhover-4' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#E7E7D6'>First Day / Last Day of School</div></li>
<li style="background: #FFB573"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-5' position='bottom'>&nbsp;</a><div id='categoryhover-5' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#FFB573'>Grading Period Ends</div></li>
<li style="background: #5D5D99"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-23' position='bottom'>&nbsp;</a><div id='categoryhover-23' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#5D5D99'>Lab</div></li>
<li style="background: #FF87B9"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-19' position='bottom'>&nbsp;</a><div id='categoryhover-19' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#FF87B9'>Media/Technology Events</div></li>
<li style="background: #C0BFFF"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-12' position='bottom'>&nbsp;</a><div id='categoryhover-12' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#C0BFFF'>PTA Event</div></li>
<li style="background: #E36875"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-22' position='bottom'>&nbsp;</a><div id='categoryhover-22' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#E36875'>Quiz</div></li>
<li style="background: #C3DFFC"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-25' position='bottom'>&nbsp;</a><div id='categoryhover-25' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#C3DFFC'>Reading</div></li>
<li style="background: #84EFF7"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-6' position='bottom'>&nbsp;</a><div id='categoryhover-6' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#84EFF7'>School Holiday</div></li>
<li style="background: #E9EC13"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-18' position='bottom'>&nbsp;</a><div id='categoryhover-18' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#E9EC13'>Service Learning</div></li>
<li style="background: #A5DE63"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-3' position='bottom'>&nbsp;</a><div id='categoryhover-3' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#A5DE63'>Staff Development</div></li>
<li style="background: #FFE773"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-10' position='bottom'>&nbsp;</a><div id='categoryhover-10' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#FFE773'>TAKS Testing</div></li>
<li style="background: #CC0017"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-21' position='bottom'>&nbsp;</a><div id='categoryhover-21' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#CC0017'>Test</div></li>
<li style="background: #C6A5F7"><a class='ui-detail-overlay calendarfilter-detailoverlaybtn' actionType='hover' actionClass='active' targetDivID='categoryhover-8' position='bottom'>&nbsp;</a><div id='categoryhover-8' class='calendarfilter-detailoverlaypnl ui-helper-hidden' style='background:#C6A5F7'>Testing Dates</div></li>
</ul>


<script type="text/javascript">
    $(document).ready(function() {
        
        $('.ui-detail-overlay').detailoverlay();
    });
</script>
<script type="text/javascript">
    $(document).ready(function() {
        // ADA click events
        $(".ui-calendarfilter-addremove").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".ui-btn-toolbar").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });
    });
</script>
            </div>
        </div>

        </div>
        
        
		
		<div id="calendar-pnl-buttons">
            <div id="calendar-pnl-wrapper">
                <div id="calendar-pnl-title">
                    <h1>Month Name Placeholder</h1>
                </div>
                <div id="calendar-pnl-buttons-top">
			        <div id='calendar-pnl-more-panel' class="ui-btn-menu-panel"> 
				        <ul>
                            
					        <!---->
					        <li><a id="ui-btn-calendarlist-export" onclick="LoadEventExportByDateRange();" title="Export events by date range."><span>Export Events</span></a></li>
				        </ul>
			        </div>
				
                    <a id="calendar-btn-print" onclick="LoadEventPrint();" title="Print the selected calendar view." class="ui-btn-toolbar icon" tabindex="0">
                        <span><div class="ui-btn-toolbar-icon print">&nbsp;</div>&nbsp;</span>
                    </a>

                    <!--
			        <a id="calendar-btn-more" href='#calendar-pnl-more-panel' class='ui-btn-menu'><span>More<span class="ui-chevron"></span></span></a>
                    -->

                    
                    <a id="A1" onclick="LoadEventExportByDateRange();" title="Export events by date range." class="ui-btn-toolbar icon" tabindex="0">
                        <span><div class="ui-btn-toolbar-icon export">&nbsp;</div>Export</span>
                    </a>

                    

			        <!--

<script type="text/javascript">
    $(document).ready(function() {
        $('a.ui-btn-menu').menubutton();
    });
</script>-->
                    <div class="app-level-social-rss"><a title='Subscribe to RSS Feed' tabindex='0' class='ui-btn-toolbar rss' href="https://www.allenisd.org/site/Default.aspx?PageType=4&DomainID=1654&ModuleInstanceID=4397&PageID=9568"><span>Subscribe to RSS Feed</span></a></div>
                    <div class="app-level-social-ical"><a id="calendar-btn-icalfed" tabindex="0" class="ui-btn-toolbar ical" href="https://www.allenisd.org//site/Default.aspx?PageID=9568&PageType=20&DomainID=1654&ModuleInstanceID=4397" title="iCal Feed Instructions"><span>iCal Feed Instructions</span></a></div>
                </div>
            </div>
		</div>
            
        <div id="calendar-pnl-title-container">
            <div id="calendar-pnl-buttons-bottom">
           
			    <span class="ui-toggle" id="calendarview-toggle">
				    <span class="inner">
					    <a id="calendar-btn-change-day" onclick="ChangeView('basicDay')" class="ui-btn-toggle first day" tabindex="0">
                            <span><div class="ui-btn-toggle-icon day">&nbsp;</div>Day</span>
                        </a>
                        <a id="calendar-btn-change-week" onclick="ChangeView('basicWeek')" class="ui-btn-toggle week" tabindex="0">
                            <span><div class="ui-btn-toggle-icon week">&nbsp;</div>Week</span>
                        </a>
                        <a id="calendar-btn-change-month" onclick="ChangeView('month')" class="ui-btn-toggle month" tabindex="0">
                            <span><div class="ui-btn-toggle-icon month">&nbsp;</div>Month</span>
                        </a>
                        <a id="ui-btn-calendarlist-list" onclick="LoadEventListView(4397,$('#calendar').fullCalendar('getmonth'),$('#calendar').fullCalendar('getyear'));" title="View events in a list format." class="ui-btn-toggle last list" tabindex="0">
                            <span><div class="ui-btn-toggle-icon list">&nbsp;</div>List</span>
                        </a>
				    </span>
			    </span>
            
                <button id="calendar-btn-change-today" onclick="GoToToday()" class="ui-btn-toolbar icon bb-butt" tabindex="0">
                    <span>Today</span>
                </button>

                <div id="calendar-pnl-dateselect">
                    <a id="ui-btn-calendarlist-back" onclick="GoToPrevious()" title="Go back." class="ui-btn-toolbar symbol" tabindex="0"><span><b>&lsaquo;</b></span></a>
			        <label for="calendarlist-month" class="ui-calendar-label hidden">Change Month</label>
                    <ul id="sel-calendarlist-month">
                        <li itemid="1">January</li>
                        <li itemid="2">February</li>
                        <li itemid="3">March</li>
                        <li itemid="4">April</li>
                        <li itemid="5">May</li>
                        <li itemid="6">June</li>
                        <li itemid="7">July</li>
                        <li itemid="8">August</li>
                        <li itemid="9">September</li>
                        <li itemid="10">October</li>
                        <li itemid="11">November</li>
                        <li itemid="12">December</li>
                    </ul>
                    

<script type="text/javascript">
    $(document).ready(function() {
    
        CheckScript('Dropdown', staticURL + '/GlobalAssets/Scripts/ThirdParty/jquery.dropdown.js');
        
        // get rid of any old dropdowns with the same id
        $('ul.ui-dropdown').each(function() {
            if ($(this).attr('id') == 'sel-calendarlist-month') {
                $(this).remove();
            }
        });
    });
    
    function SetRichComboValue(listid, value) {
        var dropdown = $('#' + listid);
        var selected = $('#selected' + listid);
        
        if (dropdown.find("li[itemid='" + value + "']").length > 0) {

            dropdown.find("li").removeClass("selected");
            dropdown.find("li[itemid='" + value + "']:first").addClass('selected');

            selected.children('span').html( dropdown.find("li[itemid='" + value + "']:first").html() );
            
            $('#' + dropdown.attr('hidfield')).val(value);
        }
    }
</script>
<input type='hidden' id='calendarlist-month' name='calendarlist-month' value='0' />
<script type='text/javascript'>
$(document).ready(function(){
$('#sel-calendarlist-month').attr('hidfield', 'calendarlist-month');
$('#calendarlist-month').attr('errormessage', '');
$('#calendarlist-month').attr('validationtype', 'range');
$('#calendarlist-month').attr('min', '1');
$('#sel-calendarlist-month').addClass('ui-dropdown ');
$('#sel-calendarlist-month').dropdown({isTreeView : false,
isInline : true,
width : 'auto',
isRequired : false,
elemType : 'div'
});
$('#sel-calendarlist-month li').not('.noselect').click(selcalendarlistmonthdropdownCallback);
});
function selcalendarlistmonthdropdownCallback() {
var itemid = $(this).attr('itemid');
ChangeMonth(itemid);
return false;
}
</script>

			
			        <ul id="sel-calendarlist-year">
                        <li itemid="2017">2017</li>
                        <li itemid="2018">2018</li>
                        <li itemid="2019">2019</li>
                        <li itemid="2020">2020</li>
                        <li itemid="2021">2021</li>
                        <li itemid="2022">2022</li>
                        <li itemid="2023">2023</li>
                        <li itemid="2024">2024</li>
                    </ul>
                    

<script type="text/javascript">
    $(document).ready(function() {
    
        CheckScript('Dropdown', staticURL + '/GlobalAssets/Scripts/ThirdParty/jquery.dropdown.js');
        
        // get rid of any old dropdowns with the same id
        $('ul.ui-dropdown').each(function() {
            if ($(this).attr('id') == 'sel-calendarlist-year') {
                $(this).remove();
            }
        });
    });
    
    function SetRichComboValue(listid, value) {
        var dropdown = $('#' + listid);
        var selected = $('#selected' + listid);
        
        if (dropdown.find("li[itemid='" + value + "']").length > 0) {

            dropdown.find("li").removeClass("selected");
            dropdown.find("li[itemid='" + value + "']:first").addClass('selected');

            selected.children('span').html( dropdown.find("li[itemid='" + value + "']:first").html() );
            
            $('#' + dropdown.attr('hidfield')).val(value);
        }
    }
</script>
<input type='hidden' id='calendarlist-year' name='calendarlist-year' value='0' />
<script type='text/javascript'>
$(document).ready(function(){
$('#sel-calendarlist-year').attr('hidfield', 'calendarlist-year');
$('#calendarlist-year').attr('errormessage', '');
$('#calendarlist-year').attr('validationtype', 'range');
$('#calendarlist-year').attr('min', '1');
$('#sel-calendarlist-year').addClass('ui-dropdown ');
$('#sel-calendarlist-year').dropdown({isTreeView : false,
isInline : true,
width : '',
isRequired : false,
elemType : 'div'
});
$('#sel-calendarlist-year li').not('.noselect').click(selcalendarlistyeardropdownCallback);
});
function selcalendarlistyeardropdownCallback() {
var itemid = $(this).attr('itemid');
ChangeYear(itemid);
return false;
}
</script>


			        <a id="ui-btn-calendarlist-forward" onclick="GoToNext()" title="Go forward." class="ui-btn-toolbar symbol" tabindex="0"><span><b>&rsaquo;</b></span></a>
                </div>
            </div>

        </div>
    </div>
    
    <table id="calendar-tbl-calendars" style="position: relative;">
        <caption>Calendar</caption>
        <tr>
        <td id="calendar-tbl-calendars-col1">
            <div id="calendar-pnl-smcalendar">
               <div id="small-calendar-1"></div>
            </div>
        </td>
        <td style="width: 100%;" id="calendar-tbl-calendars-col2">
            <div id="calendar" style="width: 100%"></div>
            <div id="calendarlist-pnl-specialview" style="width: 100%" class="ui-helper-hidden"></div>
        </td>
        </tr>
    </table>
    
    
    
</div>
</div>

</body>
</html>
